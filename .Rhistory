print(head(job_data))
companies <- page %>%
html_nodes(".companyName") %>%
html_text()
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(dplyr)
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(dplyr)
url <- "https://ca.indeed.com/jobs?q=data+analyst&l=British+Columbia"
# Read HTML
page <- read_html(url)
library(rvest)
library(httr)
url <- "https://ca.indeed.com/jobs?q=data+analyst&l=British+Columbia"
# Pretend to be a browser
page <- read_html(GET(
url,
add_headers('User-Agent' = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36')
))
install.packages("chromote")
library(chromote)
library(rvest)
b <- ChromoteSession$new()
b$Page$navigate("https://ca.indeed.com/jobs?q=data+analyst&l=British+Columbia")
Sys.sleep(5) # wait for JavaScript to load the jobs
html <- b$DOM$getDocument()
content <- b$DOM$getOuterHTML(html$root$nodeId)[["outerHTML"]]
page <- read_html(content)
# Extract data
jobs <- page %>% html_nodes("h2.jobTitle span") %>% html_text()
companies <- page %>% html_nodes("span.companyName") %>% html_text()
locations <- page %>% html_nodes("div.companyLocation") %>% html_text()
job_data <- data.frame(
Job_Title = jobs,
Company = companies,
Location = locations,
stringsAsFactors = FALSE
)
print(head(job_data))
install.packages("chromote")
library(chromote)
library(rvest)
b <- ChromoteSession$new()
b$Page$navigate("https://ca.indeed.com/jobs?q=data+analyst&l=British+Columbia")
Sys.sleep(5) # wait for JavaScript to load the jobs
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(dplyr)
library(chromote)
library(rvest)
b <- ChromoteSession$new()
b$Page$navigate("https://ca.indeed.com/jobs?q=data+analyst&l=British+Columbia")
Sys.sleep(5)
html <- b$DOM$getDocument()
content <- b$DOM$getOuterHTML(html$root$nodeId)[["outerHTML"]]
page <- read_html(content)
jobs <- page %>% html_nodes("h2.jobTitle span") %>% html_text()
companies <- page %>% html_nodes("span.companyName") %>% html_text()
locations <- page %>% html_nodes("div.companyLocation") %>% html_text()
job_data <- data.frame(
Job_Title = jobs,
Company = companies,
Location = locations,
stringsAsFactors = FALSE
)
head(job_data)
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(dplyr)
library(chromote)
library(rvest)
b <- ChromoteSession$new()
b$Page$navigate("https://ca.indeed.com/jobs?q=data+analyst&l=British+Columbia")
Sys.sleep(6)  # wait for JS to load
html <- b$DOM$getDocument()
content <- b$DOM$getOuterHTML(html$root$nodeId)[["outerHTML"]]
page <- read_html(content)
# Updated selectors
jobs <- page %>% html_nodes("h2.jobTitle a span") %>% html_text(trim = TRUE)
companies <- page %>% html_nodes("span[data-testid='company-name']") %>% html_text(trim = TRUE)
locations <- page %>% html_nodes("div[data-testid='text-location']") %>% html_text(trim = TRUE)
job_data <- data.frame(
Job_Title = jobs,
Company = companies,
Location = locations,
stringsAsFactors = FALSE
)
print(head(job_data))
b <- ChromoteSession$new()
b$Page$navigate("https://ca.indeed.com/jobs?q=data+analyst&l=British+Columbia")
Sys.sleep(6)  # wait for JS to load
html <- b$DOM$getDocument()
content <- b$DOM$getOuterHTML(html$root$nodeId)[["outerHTML"]]
page <- read_html(content)
writeLines(substr(as.character(page), 1, 3000))
# Updated selectors
jobs <- page %>% html_nodes("h2.jobTitle a span") %>% html_text(trim = TRUE)
companies <- page %>% html_nodes("span[data-testid='company-name']") %>% html_text(trim = TRUE)
locations <- page %>% html_nodes("div[data-testid='text-location']") %>% html_text(trim = TRUE)
job_data <- data.frame(
Job_Title = jobs,
Company = companies,
Location = locations,
stringsAsFactors = FALSE
)
print(head(job_data))
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(dplyr)
library(chromote)
library(rvest)
library(httr)
library(jsonlite)
res <- GET("https://serpapi.com/search.json", query = list(
engine = "google_jobs",
q = "data analyst British Columbia",
api_key = "YOUR_API_KEY"
))
jobs <- fromJSON(content(res, "text"))$jobs_results
head(jobs)
url <- "https://www.jobbank.gc.ca/jobsearch/jobposting?searchstring=data+analyst&locationstring=British+Columbia&sort=M"
# Download and parse JSON data
res <- GET(url)
html <- content(res, as = "text", encoding = "UTF-8")
# Extract text content
page <- read_html(html)
# Extract job info from HTML
titles <- page %>% html_nodes(".resultJobItem h3 a") %>% html_text(trim = TRUE)
employers <- page %>% html_nodes(".business") %>% html_text(trim = TRUE)
locations <- page %>% html_nodes(".location") %>% html_text(trim = TRUE)
jobs <- data.frame(
Title = titles,
Employer = employers,
Location = locations,
stringsAsFactors = FALSE
)
print(head(jobs))
res <- GET("https://serpapi.com/search.json", query = list(
engine = "google_jobs",
q = "data analyst British Columbia",
api_key = "PASTE_YOUR_KEY_HERE"
))
json <- fromJSON(content(res, "text"))
jobs <- json$jobs_results[, c("title", "company_name", "location")]
head(jobs)
res <- GET("https://serpapi.com/search.json", query = list(
engine = "google_jobs",
q = "data analyst British Columbia",
api_key = "PASTE_YOUR_KEY_HERE"
))
json <- fromJSON(content(res, "text"))
jobs <- json$jobs_results[, c("title", "company_name", "location")]
head(jobs)
cat(content(res, "text"))
res <- GET("https://serpapi.com/search.json", query = list(
engine = "google_jobs",
q = "data analyst British Columbia",
api_key = "https://serpapi.com/manage-api-key"
))
json <- fromJSON(content(res, "text"))
jobs <- json$jobs_results[, c("title", "company_name", "location")]
head(jobs)
cat(content(res, "text"))
res <- GET("https://serpapi.com/search.json", query = list(
engine = "google_jobs",
q = "data analyst British Columbia",
api_key = "https://serpapi.com/manage-api-key"
))
json <- fromJSON(content(res, "text"))
jobs <- json$jobs_results[, c("title", "company_name", "location")]
head(jobs)
res <- GET("https://serpapi.com/search.json", query = list(
engine = "google_jobs",
q = "data analyst British Columbia",
api_key = "https://serpapi.com/manage-api-key"
))
json <- fromJSON(content(res, "text"))
jobs <- json$jobs_results[, c("title", "company_name", "location")]
head(jobs)
cat(content(res, "text"))
res <- GET("https://serpapi.com/search.json", query = list(
engine = "google_jobs",
q = "data analyst British Columbia",
api_key = "e520e1a6b5aed28d119e8315147bbe9b632ec0dec29c186b8a725ce47a0cb757"
))
json <- fromJSON(content(res, "text"))
jobs <- json$jobs_results[, c("title", "company_name", "location")]
head(jobs)
cat(content(res, "text"))
install.packages("openxlsx")
res <- GET("https://serpapi.com/search.json", query = list(
engine = "google_jobs",
q = "data analyst British Columbia",
api_key = "e520e1a6b5aed28d119e8315147bbe9b632ec0dec29c186b8a725ce47a0cb757"
))
json <- fromJSON(content(res, "text"))
jobs <- json$jobs_results[, c("title", "company_name", "location")]
head(jobs)
write.xlsx(jobs, "serpapi_jobs.xlsx", rowNames = FALSE)
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(dplyr)
library(chromote)
library(rvest)
library(httr)
library(jsonlite)
library(openxlsx)
res <- GET("https://serpapi.com/search.json", query = list(
engine = "google_jobs",
q = "data analyst British Columbia",
api_key = "e520e1a6b5aed28d119e8315147bbe9b632ec0dec29c186b8a725ce47a0cb757"
))
json <- fromJSON(content(res, "text"))
jobs <- json$jobs_results[, c("title", "company_name", "location")]
head(jobs)
write.xlsx(jobs, "serpapi_jobs.xlsx", rowNames = FALSE)
api_key <- "e520e1a6b5aed28d119e8315147bbe9b632ec0dec29c186b8a725ce47a0cb757"
all_jobs <- data.frame()
for (i in seq(0, 50, by = 10)) {  # pulls first 6 pages (~60 jobs)
res <- GET("https://serpapi.com/search.json", query = list(
engine = "google_jobs",
q = "data analyst British Columbia",
start = i,
api_key = api_key
))
json <- fromJSON(content(res, "text"))
page_jobs <- json$jobs_results[, c("title", "company_name", "location")]
all_jobs <- bind_rows(all_jobs, page_jobs)
Sys.sleep(1)  # polite delay between requests
}
# Save results
write.xlsx(all_jobs, "serpapi_jobs_all.xlsx", rowNames = FALSE)
print(nrow(all_jobs))
head(all_jobs)
url <- "https://www.jobbank.gc.ca/jobsearch/jobsearch?searchstring=data+analyst&locationstring=British+Columbia"
page <- read_html(url)
titles <- page %>% html_nodes(".resultJobItem h3 a") %>% html_text(trim = TRUE)
companies <- page %>% html_nodes(".business") %>% html_text(trim = TRUE)
locations <- page %>% html_nodes(".location") %>% html_text(trim = TRUE)
jobs <- data.frame(
Title = titles,
Employer = companies,
Location = locations,
stringsAsFactors = FALSE
)
